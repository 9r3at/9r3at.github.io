---
title: "가상 면접 사례로 배우는 대규모 시스템 설계 기초 - 정리 1장 규모 확장성"
date: 2025-08-04 06:06:00 +0900
categories: [가상 면접 사례로 배우는 대규모 시스템 설계 기초]
tags: [Architecture]
description: 가상 면접 사례로 배우는 대규모 시스템 설계 기초 리뷰
toc: true
comments: true
---

# 가상 면접 사례로 배우는 대규모 시스템 설계 기초 

## 1장 사용자 수에 따른 규모 확장성

### 캐시

캐시는 데이터가 잠시 보관되는 곳으로 데이터베이스보다 훨씬 빠르다. 데이터베이스의 부하 개선을 위해 사용한다. 

- 캐시를 사용할 때 주의 할 점
###  무상태(Stateless) 웹 계층

수평적으로 확정하는 방법을 고민하는 순서이다. 상태 정보( 사용자 세션 정보)를 웹 계층에서 제거하여야한다. 바람직한 전략은 상태 정보를 관계형 데이터베이스나 NoSQL같은 지속성 저장소에 보관하고, 필요할 때 가져오도록 하는 것이다. 이렇게 구성된 웹 계층을 무상태 웹계층이라 부른다. 

![Image](https://prod-files-secure.s3.us-west-2.amazonaws.com/e6db513d-ec54-40ff-aa74-2487b0bcfe15/f30f1d34-1661-4ff9-a868-45f53833a7e5/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466XP6H5IHZ%2F20250804%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250804T070444Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEAYaCXVzLXdlc3QtMiJGMEQCIDmrk%2B5OmD8rvCNJ2kdZKjg1urcdwPB8GuZNka3wwdo9AiAjSJRspFxr6P8vXlviM8LfDCcUf%2Fy6szkJfJj0zE39%2FSr%2FAwg%2FEAAaDDYzNzQyMzE4MzgwNSIMBNK2p%2Fp%2BtphSWktHKtwDN9%2FkQ76i7oUfmAPtk0KPgAoiIcZB%2Fv%2B1lA5Q%2BhDKXs8y66OjiWdtZKWuOKzwGFB2ClJ3FkTGCf%2BR%2Fa0kTRvmOqR3FN044b5L0Q3g3zcMdhQIm6%2BNgWBbVh4%2BV1ML5ZfVrQWRn5hYNqsl3cEXe0qNIWst%2BPXbVAPMjKeOEsJk1lg%2Bvsi%2FMNF5t2XkU3sP1Ry7ohzo8M2TvE%2Bnocqc7b0M37CMcRUm9iuP6f4MUIHrn1UD%2Bnx7UU5uc4p8kYEvnrTMNv64oTg7pW3hkVM%2BCgmDV%2FTvXw9F2Xg4epyOZPOD6B6Vw8OqX7pWJgDVL%2F8iUzaGKuwgx7izuWm1FYUyv0H1BS5dkjXbnrPDcPu0XwVkkRkCKzLl6HG8CYN9B3LfnJtXvJOJM9W%2B8ifnMUEomwEeMLQH0lp%2FP5jxdUF4qxGFckMFuGEt2VEzDeKKKdupTqlVD6QI6g5HZpbnV2pO7VRRYDcI%2Bo%2FKstI3%2FdvrFYxkuLiqRn0%2BPdLeJcUxcu58j0ktZfFk9ZMHh9cwl%2FAKhTgga%2FdniiPvpFS1wW0rqevrzoRYy9X3QxG6Ce%2FJ4NHvSjFXnEaqNFHPQhw9IwCy5OsQ1I4t5dnyEVrcL%2FZx1VeqVJstB9wSQw8ABmJPhVcwiI3BxAY6pgE4ppRC3Vfdy1tFGQ7FdODepn6mNU5FAtPi4C9Mr1zETOb9nAr4r%2BvYW7gZF8EPeHHcsX6HszrJ3wpbyLAiM7VoRQmsMtJYN9FlR5j4Ezn9iRoUnaHJlGpi5g7E7s%2FxsZVJMjvOTpD%2FCeNUkRGM0bjBsOH2D496IpJrT0tdIPOLhr6p4LR1cD0toezxrZ00qu3gDnicNLi%2FgCkP66kqLEno9OCDQU5E&X-Amz-Signature=3c9dce41227faec0030de5fe6a77dfe5a587926027e2dc432eb71fe0b1b1b819&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

1장에서 말한 내용을 적용한 아키텍처이다. 

- 웹 서버의 분산, 데이터 베이스의 분산
- 캐싱
- 메시지큐
- 로그, 메트릭, 자동화 등 DevOps 적인 성향의 툴
- CDN
- 로드밸런
### 데이터 베이스의 확장

데이터 베이스의 확장에는 수직적 확장 (스케일업), 수평적 확장(스케일 아웃)이 있다.

**수직적 확장 - 스케일 업**

기존 서버에 고성능 자원을 증설하는 방법이다. 

- 고성능 자원이라도 한대의 서버로는 감당하기 어려운 한계점이 있다. 
- SPOF의 문제가 크다.
- 비용이 많이 든다. 고성능일 수록 가격이 올라가기 마련이다.
**수평적 확장 - 스케일 아웃**

DB의 수평적 확장은 수로 샤딩(Sharding)이라고도 부르는데 서버를 추가함으로써 부하를 줄이고 성능을 향상시는 작업이다. 샤드는 분할된 데이터베이스에 특정 정책에 따라 데이터를 저장하는 공간을 정한다. 예를 들어 User_id % 4의 정책이라면 나머지값으로 4개의 데이터 베이스 중 어디에 저장되는지 정하는 보관 방식이다.
**샤딩 키**

샤딩 키란 데이터가 어떻게 분산될지 정하는 하나 이상의 컬럼으로 구성된다. User_id%4의 경우 user_id가 샤딩 키가 된다. 데이터를 고르게 분배할 수 있는 키를 정하는 것이 샤딩의 핵심 기술이다. 

- 데이터의 재 샤딩 : 재 샤딩은 다음과 같을 때 필요하다. 
- 유명 인사 문제 : 핫스팟 키 문제라고도 불리는 문제는 샤드의 질의가 집중되어 서버에 과부하가 걸리는 문제이다. 샤드에는 Read연산 때문에 과부하가 걸리는 문제이다. 
- 조인과 비정규화 : 일단 하나의 데이터베이스를 여러 샤드 서버로 쪼개고 나면, 여러 샤드에 걸친 데이터를 조인하기가 힘들어진다. 이를 해결하는 한 가지 방법은 데이터베이스를 비정규화 하여 하나의 테이블에서 질의가 수행될 수 있도록 하는 것이다.
### **결론**

![Image](https://prod-files-secure.s3.us-west-2.amazonaws.com/e6db513d-ec54-40ff-aa74-2487b0bcfe15/a2b7cb0a-9f04-46d5-a7d1-1eae25c5f2df/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466XP6H5IHZ%2F20250804%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250804T070444Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEAYaCXVzLXdlc3QtMiJGMEQCIDmrk%2B5OmD8rvCNJ2kdZKjg1urcdwPB8GuZNka3wwdo9AiAjSJRspFxr6P8vXlviM8LfDCcUf%2Fy6szkJfJj0zE39%2FSr%2FAwg%2FEAAaDDYzNzQyMzE4MzgwNSIMBNK2p%2Fp%2BtphSWktHKtwDN9%2FkQ76i7oUfmAPtk0KPgAoiIcZB%2Fv%2B1lA5Q%2BhDKXs8y66OjiWdtZKWuOKzwGFB2ClJ3FkTGCf%2BR%2Fa0kTRvmOqR3FN044b5L0Q3g3zcMdhQIm6%2BNgWBbVh4%2BV1ML5ZfVrQWRn5hYNqsl3cEXe0qNIWst%2BPXbVAPMjKeOEsJk1lg%2Bvsi%2FMNF5t2XkU3sP1Ry7ohzo8M2TvE%2Bnocqc7b0M37CMcRUm9iuP6f4MUIHrn1UD%2Bnx7UU5uc4p8kYEvnrTMNv64oTg7pW3hkVM%2BCgmDV%2FTvXw9F2Xg4epyOZPOD6B6Vw8OqX7pWJgDVL%2F8iUzaGKuwgx7izuWm1FYUyv0H1BS5dkjXbnrPDcPu0XwVkkRkCKzLl6HG8CYN9B3LfnJtXvJOJM9W%2B8ifnMUEomwEeMLQH0lp%2FP5jxdUF4qxGFckMFuGEt2VEzDeKKKdupTqlVD6QI6g5HZpbnV2pO7VRRYDcI%2Bo%2FKstI3%2FdvrFYxkuLiqRn0%2BPdLeJcUxcu58j0ktZfFk9ZMHh9cwl%2FAKhTgga%2FdniiPvpFS1wW0rqevrzoRYy9X3QxG6Ce%2FJ4NHvSjFXnEaqNFHPQhw9IwCy5OsQ1I4t5dnyEVrcL%2FZx1VeqVJstB9wSQw8ABmJPhVcwiI3BxAY6pgE4ppRC3Vfdy1tFGQ7FdODepn6mNU5FAtPi4C9Mr1zETOb9nAr4r%2BvYW7gZF8EPeHHcsX6HszrJ3wpbyLAiM7VoRQmsMtJYN9FlR5j4Ezn9iRoUnaHJlGpi5g7E7s%2FxsZVJMjvOTpD%2FCeNUkRGM0bjBsOH2D496IpJrT0tdIPOLhr6p4LR1cD0toezxrZ00qu3gDnicNLi%2FgCkP66kqLEno9OCDQU5E&X-Amz-Signature=151b537a3512accb041e55d336764b3c150f3d3e65b63d255eaeabf57cf4c061&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)


