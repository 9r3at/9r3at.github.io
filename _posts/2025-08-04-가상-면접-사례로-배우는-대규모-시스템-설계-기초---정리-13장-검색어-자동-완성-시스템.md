---
title: "가상 면접 사례로 배우는 대규모 시스템 설계 기초 - 정리 13장 검색어 자동 완성 시스템"
date: 2025-08-04 06:05:00 +0900
categories: [가상 면접 사례로 배우는 대규모 시스템 설계 기초]
tags: [Architecture]
description: 가상 면접 사례로 배우는 대규모 시스템 설계 기초 리뷰
toc: true
comments: true
---

# 가상 면접 사례로 배우는 대규모 시스템 설계 기초 

## 13장 검색어 자동 완성 시스템

개략적으로는 시스템은 두 부분으로 나뉜다.

- 데이터 수집 서비스 :  사용자가 입력한 질의를 실시간으로 수집하는 시스템이다. 데이터가 많은 애플리케이션에 실시간 시스템은 그다지 바람직하지 않지만 설계안을 만드는 출발점으로는 괜찮을 것이다. 
- 질의 서비스 : 주어진 질의에 다섯 개의 인기 검색어를 정렬해 내놓는 서비스이다.
### 설계

최적화 방안을 논의한다.

- 트라이 자료구조
- 데이터 수집 서비스
- 질의 서비스
- 규모 확장이 가능한 저장소
- 트라이 연산
### 트라이 자료구조

관계형 데이터베이스를 이용해 질의문을 골라내는 방안은 효율적이지 않다. 이 문제는 Trie 접두어 트리라고도 하는 트라이를 사용해 해결할 것이다. 

트라이 자료구조는 트리형태의 자료 구조로 루트 노드는 빈 문자열을 나타낸다. 각 노드는 글자 하나를 저장하며 26개의 자식 노드를 가질 수 있다. 

각 트리 노드는 하나의 단어 또는 접두어 문자열을 나타낸다.

tree, try, true, toy, wish, win 이 보관된 트라이이다.

![Image](https://prod-files-secure.s3.us-west-2.amazonaws.com/e6db513d-ec54-40ff-aa74-2487b0bcfe15/1409172d-69da-49f4-9a42-e508e59162c8/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4662DHCM3GK%2F20250804%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250804T072204Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEAcaCXVzLXdlc3QtMiJIMEYCIQC5x%2BIAFF%2BQkWHUvE7ZnQvKcdXEtLv%2BQejKoiRb67u9KAIhAJx0iCKpgBUxG1bO28rruhxPMh6E9Oz6hYbK7TsVM0NaKv8DCEAQABoMNjM3NDIzMTgzODA1Igx%2Bnw3uq9Iqv9jgZI0q3ANRfOG4xRm1t6OaQFICs2Qr3wsniOHlZ6w1OBvGUVKq8r%2BNJYeVBvNLjZnwg89JnMX8GT137vy6nfUPX%2BbiKn2FS0fdP7pB6XdoncOrMOtAgpHai7qYS1y2TZCrEKtYw43Uq5OR%2FCJJ%2FVcVPTEF69nxxtw6eigUcgVub8WlSNE41CFPNzlcbeidRMG7cHPSlf7EK5Y1KoBMSlAw0AuOTI%2FAl7mwLOUcVE9s6teMYCrrPUhN1zMpOits5JlbsGauAyqZpTlAlmJqeZ8kNk29QAU9qmlVePxjTdoXsX5GUnbfWpw114kZF7f1m7BT3p0wnq3hcsH1UELjAVDqo%2FiuNADSEvhphqlyWtl59WD2KWBdognkxZ1zVPgpvmnGe4wj56ZYJq4J7GZFGUx%2Br04Ap%2BTjb6%2BJ82HqnUb6zi6esdlArJ28cmD3BrmG0eVKad%2B%2Fwmn4zpGm04Rwtzcr23lRw1WsXZBFnBj%2BfB39eguH3lygDUu9S%2F1z%2FfwdddryeNsopK%2BWgYAk2y%2BrKb5HvH2an39aah%2F1Ut5HFFY8VW3APSLGmVFzvw86%2BetyhsVBDvfC%2BghV8KrDehE7uDca55xxG61%2FD%2F6zhY%2FpprDp9KSiDayC4c4SpoBkXCg7L%2BM6%2BDC1tsHEBjqkAbFKboh513Fs%2FkHJ2mRGLtc1rdT3s5lAwM8uGkzjfzMi7T2V8syEnXcxIRjYSyv4fl6ltPLtnrV7yF5Gp%2BycDsnBJb4vGJysVfn9QGQqqzefVIVBwugTDtC%2FhqaJvYS9U1AJi%2BKQLz%2F9slpHnHypblSZ1TQ5ED5eVsHXBpJDb9oxmlwhURuw8%2BeZoeiQ8vNEEyWlLCUVzLObW8mK7invvbMKo97W&X-Amz-Signature=c9b4a433a6fe052f0bc4cbd6742aca204add8ec27e0540334918d37ecda4fa49&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)

p : 접두어의 길이

n : 트라이 안에 노드 개수

c : 주어진 노드의 자식 개수

- 접두어를 표현하는 노드를 찾는 시간 복잡도는 O(p)
- 해당 노드부터 시작하는 하위 트리를 탐색하여 모든 유효 노드를 찾는 복잡도는 O(c)
- 유효 노드들을 정렬하여 가장 인기있는 검색어 k개를 찾는 복잡도는 O(clogc)
트라이를 갱신하는 방법은 두가지가 있다. 

- 매주 한번 갱신하는 방법
- 트라이의 각 노드를 개별적으로 갱신하는 방법
검색어 삭제 

- 혐오성, 폭력성, 성적이 노골적이거나 위협요소는 제거해야한다. 

